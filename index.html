<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>pyscript test (debug)</title>

  <!-- PyScript CDN -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/pyscript.css" />
  <script defer src="https://pyscript.net/releases/2024.1.1/pyscript.js"></script>

  <style>
    html,body { height:100%; margin:0; background:#000; }
    #game-container { width:100vw; height:100vh; display:flex; align-items:center; justify-content:center; }

    /* 절대적으로 py-config/py-script 내용이 페이지에 보이지 않도록 숨김 */
    py-config, py-script, pyscript, pyscript-app, pyscript-debug {
      display:none !important;
    }

    /* canvas는 보이게 (숨기지 않음) */
    canvas { display:block !important; user-select:none; -webkit-user-select:none; }
  </style>

  <!-- 짧은 스크립트: pyscript가 로드되었는지 콘솔에 찍어줌 -->
  <script>
    window.addEventListener("load", () => {
      // 3초 뒤에 pyscript 전역객체가 있는지 체크
      setTimeout(() => {
        try {
          if (window.pyscript !== undefined) {
            console.log("[DEBUG] pyscript object exists:", window.pyscript);
          } else {
            console.log("[DEBUG] pyscript global NOT found (window.pyscript is undefined).");
          }
        } catch (e) {
          console.log("[DEBUG] pyscript check error:", e);
        }
        // 추가: list loaded scripts
        const scripts = Array.from(document.scripts).map(s => ({src: s.src, type: s.type}));
        console.log("[DEBUG] scripts on page:", scripts);
      }, 3000);
    });
  </script>
</head>
<body>
  <div id="game-container"></div>

  <!-- PyScript 설정: (테스트용) -->
  <py-config>
    packages = ["pygame"]
    fetch = ["test_game.py"]
  </py-config>

  <!-- 네가 올려둔 테스트용 파이썬 -->
  <py-script src="test_game.py"></py-script>
</body>
</html>
